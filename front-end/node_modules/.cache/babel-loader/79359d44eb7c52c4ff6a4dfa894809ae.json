{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/jim/Documents/Code/SoftEng Project/evcharge/TL20-28/front-end/src/Charge.js\";\nimport React from 'react';\nimport $ from 'jquery';\nimport './Charge.css';\nimport moment from 'moment';\n\nclass Charge extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      ChargingPoints: [],\n      Providers: [],\n      kw: ''\n    };\n    this.updateInput = this.updateInput.bind(this);\n  }\n\n  updateInput(event) {\n    this.setState({\n      kw: event.target.value\n    });\n    localStorage.setItem(\"energydelivered\", event.target.value);\n    var cost;\n    var kw1;\n    $(\"#Provider\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n    $(\"#Provider\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n    this.state.Providers.forEach(function (item) {\n      if (item.lowtoMidLimit == 0) {\n        cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n        cost = cost.toFixed(2);\n        $(\"#Provider\").append(\"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\");\n      } else {\n        if (item.lowtoMidLimit >= localStorage.getItem(\"energydelivered\")) {\n          cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n          cost = cost.toFixed(2);\n          $(\"#Provider\").append(\"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\");\n        }\n\n        if (item.lowtoMidLimit < localStorage.getItem(\"energydelivered\")) {\n          if (item.midtoHighLimit >= localStorage.getItem(\"energydelivered\")) {\n            cost = item.lowPrice * item.lowtoMidLimit;\n            kw1 = localStorage.getItem(\"energydelivered\") - item.lowtoMidLimit;\n            cost = cost + kw1 * item.midPrice;\n            cost = cost.toFixed(2);\n            $(\"#Provider\").append(\"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\");\n          }\n\n          if (item.midtoHighLimit < localStorage.getItem(\"energydelivered\")) {\n            cost = item.lowPrice * item.lowtoMidLimit;\n            cost = cost + (item.midtoHighLimit - item.lowtoMidLimit) * item.midPrice;\n            kw1 = localStorage.getItem(\"energydelivered\") - item.midtoHighLimit;\n            cost = cost + kw1 * item.highPrice;\n            cost = cost.toFixed(2);\n            $(\"#Provider\").append(\"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\");\n          }\n        }\n      }\n    });\n  }\n\n  componentDidMount() {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n      }\n    };\n    fetch('//localhost:8765/evcharge/api/chargingPoints/', requestOptions).then(response => {\n      return response.json();\n    }).then(data => {\n      var types = [];\n      data.forEach(function (item) {\n        if (item.operator.ID == localStorage.getItem(\"OperatorId\")) {\n          types.push(item.id);\n        }\n      });\n      this.setState({\n        ChargingPoints: types\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n    const requestOptions1 = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n      }\n    };\n    fetch('//localhost:8765/evcharge/api/energyproviders/', requestOptions).then(response => {\n      return response.json();\n    }).then(data => {\n      this.setState({\n        Providers: data\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  makeSession(ev) {\n    ev.preventDefault();\n    var value = parseFloat(localStorage.getItem(\"energydelivered\"));\n\n    if (value <= localStorage.getItem(\"UsableBatterySizeforcharge\") && value > 0) {\n      var date = new Date();\n      const format1 = \"yyyy-MM-DDThh:mm:ss\";\n      var dateTime1 = moment(date).format(format1);\n      localStorage.setItem(\"startedon\", dateTime1);\n      var milliseconds = new Date().getTime() + 1 * 60 * 60 * 1000;\n      var later = new Date(milliseconds);\n      var dateTime2 = moment(later).format(format1);\n      localStorage.setItem(\"finishedon\", dateTime2);\n      var car = localStorage.getItem(\"carid\");\n      var chargingPoint = parseInt(localStorage.getItem(\"chargingpointid\"));\n      var energyProvider = parseInt(localStorage.getItem(\"energyproviderid\"));\n      var username = localStorage.getItem(\"username\");\n      var startedOn = localStorage.getItem(\"startedon\");\n      var finishedOn = localStorage.getItem(\"finishedon\");\n      var protocol = localStorage.getItem(\"protocol\");\n      var payment = localStorage.getItem(\"payment\");\n      var cost = parseFloat(localStorage.getItem(\"cost\"));\n      var energyDelivered = parseFloat(localStorage.getItem(\"energydelivered\"));\n      let formData = {\n        VehicleID: car,\n        ChargingPointID: chargingPoint,\n        EnergyProviderID: energyProvider,\n        Username: username,\n        StartedOn: startedOn,\n        FinishedOn: finishedOn,\n        Protocol: protocol,\n        Payment: payment,\n        Cost: cost,\n        EnergyDelivered: energyDelivered\n      };\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify(formData)\n      };\n      fetch('//localhost:8765/evcharge/api/sessions', requestOptions).then(() => {\n        window.location = \"/\";\n      }).catch(error => {\n        alert(\"You need to fill in all the fields\");\n        window.location.reload();\n        console.error(error);\n      });\n    }\n\n    if (value > localStorage.getItem(\"UsableBatterySizeforcharge\")) {\n      ev.preventDefault();\n      alert(\"Usable battery size of your car is less than the kw you filled in\");\n      window.location.reload();\n    }\n\n    if (value <= 0) {\n      ev.preventDefault();\n      alert(\"Kw can not be <=0\");\n      window.location.reload();\n    }\n  }\n\n  Protocol(ev) {\n    localStorage.setItem(\"protocol\", ev.currentTarget.value);\n    $(\"#payment\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n    $(\"#payment\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n    $(\"#payment\").append(\"<option value=\" + \"card\" + \">\" + \"card\" + \"</option>\");\n    $(\"#payment\").append(\"<option value=\" + \"cash\" + \">\" + \"cash\" + \"</option>\");\n  }\n\n  Payment(ev) {\n    localStorage.setItem(\"payment\", ev.currentTarget.value);\n  }\n\n  ChargingPointSaveId(ev) {\n    localStorage.setItem(\"chargingpointid\", ev.currentTarget.value);\n  }\n\n  EnergyProviderId(ev) {\n    localStorage.setItem(\"energyproviderid\", ev.currentTarget.value);\n    var cost;\n    var kw1;\n    this.state.Providers.forEach(function (item) {\n      if (item.id == localStorage.getItem(\"energyproviderid\")) {\n        if (item.lowtoMidLimit == 0) {\n          cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n          cost = cost.toFixed(2);\n          localStorage.setItem(\"cost\", cost);\n        } else {\n          if (item.lowtoMidLimit >= localStorage.getItem(\"energydelivered\")) {\n            cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n            cost = cost.toFixed(2);\n            localStorage.setItem(\"cost\", cost);\n          }\n\n          if (item.lowtoMidLimit < localStorage.getItem(\"energydelivered\")) {\n            if (item.midtoHighLimit >= localStorage.getItem(\"energydelivered\")) {\n              cost = item.lowPrice * item.lowtoMidLimit;\n              kw1 = localStorage.getItem(\"energydelivered\") - item.lowtoMidLimit;\n              cost = cost + kw1 * item.midPrice;\n              cost = cost.toFixed(2);\n              localStorage.setItem(\"cost\", cost);\n            }\n\n            if (item.midtoHighLimit < localStorage.getItem(\"energydelivered\")) {\n              cost = item.lowPrice * item.lowtoMidLimit;\n              cost = cost + (item.midtoHighLimit - item.lowtoMidLimit) * item.midPrice;\n              kw1 = localStorage.getItem(\"energydelivered\") - item.midtoHighLimit;\n              cost = cost + kw1 * item.highPrice;\n              cost = cost.toFixed(2);\n              localStorage.setItem(\"cost\", cost);\n            }\n          }\n        }\n      }\n    });\n    $(\"#protocol\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n    $(\"#protocol\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n    $(\"#protocol\").append(\"<option value=\" + \"accharger\" + \">\" + \"ac charger\" + \"</option>\");\n    $(\"#protocol\").append(\"<option value=\" + \"dccharger\" + \">\" + \"dc charger\" + \"</option>\");\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"body1\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fa fa-exchange\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), \"Make a new charging\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-75\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              action: \"/action_page.php\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-50\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    children: \"Details of charging\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    for: \"Point\",\n                    children: \" Charging point\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    id: \"Point\",\n                    onChange: this.ChargingPointSaveId.bind(this),\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"no\",\n                      selected: \"selected\",\n                      children: \"Choose an option\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 244,\n                      columnNumber: 45\n                    }, this), this.state.ChargingPoints.map(ChargingPoints => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: ChargingPoints,\n                      children: ChargingPoints\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 49\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    for: \"energy\",\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fa fa-bolt\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 61\n                    }, this), \" KW\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    id: \"energy\",\n                    onChange: this.updateInput.bind(this),\n                    name: \"energy\",\n                    placeholder: \"30,02\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    for: \"Provider\",\n                    children: \" Energy provider\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    disabled: true,\n                    id: \"Provider\",\n                    onChange: this.EnergyProviderId.bind(this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 252,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    for: \"protocol\",\n                    children: \" Protocol\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    disabled: true,\n                    id: \"protocol\",\n                    onChange: this.Protocol.bind(this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    for: \"payment\",\n                    children: \" Payment\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    disabled: true,\n                    id: \"payment\",\n                    onChange: this.Payment.bind(this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 258,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                id: \"Makecharge\",\n                className: \"btn\",\n                onClick: this.makeSession.bind(this),\n                children: \"Make the charging\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Charge;","map":{"version":3,"sources":["/home/jim/Documents/Code/SoftEng Project/evcharge/TL20-28/front-end/src/Charge.js"],"names":["React","$","moment","Charge","Component","constructor","props","state","ChargingPoints","Providers","kw","updateInput","bind","event","setState","target","value","localStorage","setItem","cost","kw1","html","removeClass","attr","append","forEach","item","lowtoMidLimit","lowPrice","getItem","toFixed","id","brandName","midtoHighLimit","midPrice","highPrice","componentDidMount","requestOptions","method","headers","fetch","then","response","json","data","types","operator","ID","push","catch","error","console","requestOptions1","makeSession","ev","preventDefault","parseFloat","date","Date","format1","dateTime1","format","milliseconds","getTime","later","dateTime2","car","chargingPoint","parseInt","energyProvider","username","startedOn","finishedOn","protocol","payment","energyDelivered","formData","VehicleID","ChargingPointID","EnergyProviderID","Username","StartedOn","FinishedOn","Protocol","Payment","Cost","EnergyDelivered","body","JSON","stringify","window","location","alert","reload","currentTarget","ChargingPointSaveId","EnergyProviderId","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport $ from 'jquery';\nimport './Charge.css';\nimport moment from 'moment';\n\n\nclass Charge extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { ChargingPoints: [], Providers: [], kw: '' };\n        this.updateInput = this.updateInput.bind(this);\n    }\n    updateInput(event) {\n        this.setState({ kw: event.target.value });\n        localStorage.setItem(\"energydelivered\", event.target.value);\n        var cost;\n        var kw1;\n        $(\"#Provider\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n        $(\"#Provider\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n        this.state.Providers.forEach(function (item) {\n            if (item.lowtoMidLimit == 0) {\n                cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n                cost = cost.toFixed(2);\n                $(\"#Provider\").append(\n                    \"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\"\n                )\n            }\n            else {\n                if (item.lowtoMidLimit >= localStorage.getItem(\"energydelivered\")) {\n                    cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n                    cost = cost.toFixed(2);\n                    $(\"#Provider\").append(\n                        \"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\"\n                    )\n                }\n                if (item.lowtoMidLimit < localStorage.getItem(\"energydelivered\")) {\n                    if (item.midtoHighLimit >= localStorage.getItem(\"energydelivered\")) {\n                        cost = item.lowPrice * item.lowtoMidLimit;\n                        kw1 = localStorage.getItem(\"energydelivered\") - item.lowtoMidLimit;\n                        cost = cost + (kw1 * item.midPrice);\n                        cost = cost.toFixed(2);\n                        $(\"#Provider\").append(\n                            \"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\"\n                        )\n                    }\n                    if (item.midtoHighLimit < localStorage.getItem(\"energydelivered\")) {\n                        cost = item.lowPrice * item.lowtoMidLimit;\n                        cost = cost + ((item.midtoHighLimit - item.lowtoMidLimit) * item.midPrice);\n                        kw1 = localStorage.getItem(\"energydelivered\") - item.midtoHighLimit;\n                        cost = cost + kw1 * item.highPrice;\n                        cost = cost.toFixed(2);\n                        $(\"#Provider\").append(\n                            \"<option value=\" + item.id + \">\" + item.brandName + \" \" + cost + \"</option>\"\n                        )\n                    }\n                }\n            }\n        })\n    }\n    componentDidMount() {\n        const requestOptions = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n            }\n        }\n        fetch('//localhost:8765/evcharge/api/chargingPoints/', requestOptions)\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                var types = [];\n                data.forEach(function (item) {\n                    if (item.operator.ID == localStorage.getItem(\"OperatorId\")) {\n                        types.push(item.id);\n                    }\n                })\n                this.setState({ ChargingPoints: types });\n            })\n            .catch(error => {\n                console.error(error);\n            })\n        const requestOptions1 = {\n            method: 'GET',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n            }\n        }\n        fetch('//localhost:8765/evcharge/api/energyproviders/', requestOptions)\n            .then((response) => {\n                return response.json();\n            })\n            .then((data) => {\n                this.setState({ Providers: data });\n            })\n            .catch(error => {\n                console.error(error);\n            })\n\n\n    }\n    makeSession(ev) {\n        ev.preventDefault();\n        var value = parseFloat(localStorage.getItem(\"energydelivered\"));\n        if (value <= localStorage.getItem(\"UsableBatterySizeforcharge\") && value > 0) {\n            var date = new Date();\n            const format1 = \"yyyy-MM-DDThh:mm:ss\"\n            var dateTime1 = moment(date).format(format1);\n            localStorage.setItem(\"startedon\", dateTime1);\n            var milliseconds = new Date().getTime() + (1 * 60 * 60 * 1000);\n            var later = new Date(milliseconds);\n            var dateTime2 = moment(later).format(format1);\n            localStorage.setItem(\"finishedon\", dateTime2);\n            var car = localStorage.getItem(\"carid\");\n            var chargingPoint = parseInt(localStorage.getItem(\"chargingpointid\"));\n            var energyProvider = parseInt(localStorage.getItem(\"energyproviderid\"));\n            var username = localStorage.getItem(\"username\");\n            var startedOn = localStorage.getItem(\"startedon\");\n            var finishedOn = localStorage.getItem(\"finishedon\");\n            var protocol = localStorage.getItem(\"protocol\");\n            var payment = localStorage.getItem(\"payment\");\n            var cost = parseFloat(localStorage.getItem(\"cost\"));\n            var energyDelivered = parseFloat(localStorage.getItem(\"energydelivered\"));\n            let formData = {\n                VehicleID: car,\n                ChargingPointID: chargingPoint,\n                EnergyProviderID: energyProvider,\n                Username: username,\n                StartedOn: startedOn,\n                FinishedOn: finishedOn,\n                Protocol: protocol,\n                Payment: payment,\n                Cost: cost,\n                EnergyDelivered: energyDelivered\n            };\n            const requestOptions = {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-OBSERVATORY-AUTH': localStorage.getItem(\"token\")\n                },\n                body: JSON.stringify(formData)\n            }\n            fetch('//localhost:8765/evcharge/api/sessions', requestOptions)\n                .then(() => {\n                    window.location = \"/\";\n                })\n                .catch(error => {\n                    alert(\"You need to fill in all the fields\");\n                    window.location.reload();\n                    console.error(error);\n                })\n        }\n        if (value > localStorage.getItem(\"UsableBatterySizeforcharge\")) {\n            ev.preventDefault();\n            alert(\"Usable battery size of your car is less than the kw you filled in\");\n            window.location.reload();\n        }\n        if (value <= 0) {\n            ev.preventDefault();\n            alert(\"Kw can not be <=0\");\n            window.location.reload();\n        }\n    }\n    Protocol(ev) {\n        localStorage.setItem(\"protocol\", ev.currentTarget.value);\n        $(\"#payment\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n        $(\"#payment\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n        $(\"#payment\").append(\n            \"<option value=\" + \"card\" + \">\" + \"card\" + \"</option>\"\n        )\n        $(\"#payment\").append(\n            \"<option value=\" + \"cash\" + \">\" + \"cash\" + \"</option>\"\n        )\n    }\n    Payment(ev) {\n        localStorage.setItem(\"payment\", ev.currentTarget.value);\n    }\n    ChargingPointSaveId(ev) {\n        localStorage.setItem(\"chargingpointid\", ev.currentTarget.value);\n    }\n    EnergyProviderId(ev) {\n        localStorage.setItem(\"energyproviderid\", ev.currentTarget.value);\n        var cost;\n        var kw1;\n        this.state.Providers.forEach(function (item) {\n            if (item.id == localStorage.getItem(\"energyproviderid\")) {\n                if (item.lowtoMidLimit == 0) {\n                    cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n                    cost = cost.toFixed(2);\n                    localStorage.setItem(\"cost\", cost);\n                }\n                else {\n                    if (item.lowtoMidLimit >= localStorage.getItem(\"energydelivered\")) {\n                        cost = item.lowPrice * localStorage.getItem(\"energydelivered\");\n                        cost = cost.toFixed(2);\n                        localStorage.setItem(\"cost\", cost);\n                    }\n                    if (item.lowtoMidLimit < localStorage.getItem(\"energydelivered\")) {\n                        if (item.midtoHighLimit >= localStorage.getItem(\"energydelivered\")) {\n                            cost = item.lowPrice * item.lowtoMidLimit;\n                            kw1 = localStorage.getItem(\"energydelivered\") - item.lowtoMidLimit;\n                            cost = cost + (kw1 * item.midPrice);\n                            cost = cost.toFixed(2);\n                            localStorage.setItem(\"cost\", cost);\n                        }\n                        if (item.midtoHighLimit < localStorage.getItem(\"energydelivered\")) {\n                            cost = item.lowPrice * item.lowtoMidLimit;\n                            cost = cost + ((item.midtoHighLimit - item.lowtoMidLimit) * item.midPrice);\n                            kw1 = localStorage.getItem(\"energydelivered\") - item.midtoHighLimit;\n                            cost = cost + kw1 * item.highPrice;\n                            cost = cost.toFixed(2);\n                            localStorage.setItem(\"cost\", cost);\n                        }\n                    }\n                }\n            }\n        })\n\n        $(\"#protocol\").html(\"\").removeClass(\"disabled\").attr(\"disabled\", false);\n        $(\"#protocol\").append('<option value=\"no\" selected=\"selected\">Choose an option</option>');\n        $(\"#protocol\").append(\n            \"<option value=\" + \"accharger\" + \">\" + \"ac charger\" + \"</option>\"\n        )\n        $(\"#protocol\").append(\n            \"<option value=\" + \"dccharger\" + \">\" + \"dc charger\" + \"</option>\"\n        )\n    }\n    render() {\n        return (\n            <div className=\"body1\">\n                <h2><i class=\"fa fa-exchange\" aria-hidden=\"true\"></i>Make a new charging</h2>\n                <div className=\"row\">\n                    <div className=\"col-75\">\n                        <div className=\"container\">\n                            <form action=\"/action_page.php\">\n                                <div className=\"row\">\n                                    <div className=\"col-50\">\n                                        <h3>Details of charging</h3>\n                                        <label for=\"Point\"> Charging point</label>\n                                        <select id=\"Point\" onChange={this.ChargingPointSaveId.bind(this)}>\n                                            <option value=\"no\" selected=\"selected\">Choose an option</option>\n                                            {this.state.ChargingPoints.map(ChargingPoints => (\n                                                <option value={ChargingPoints}>{ChargingPoints}</option>\n                                            ))}\n                                        </select>\n                                        <label for=\"energy\"><i className=\"fa fa-bolt\"></i> KW</label>\n                                        <input type=\"text\" id=\"energy\" onChange={this.updateInput.bind(this)} name=\"energy\" placeholder=\"30,02\" />\n                                        <label for=\"Provider\"> Energy provider</label>\n                                        <select disabled id=\"Provider\" onChange={this.EnergyProviderId.bind(this)}>\n                                        </select>\n                                        <label for=\"protocol\"> Protocol</label>\n                                        <select disabled id=\"protocol\" onChange={this.Protocol.bind(this)}>\n                                        </select>\n                                        <label for=\"payment\"> Payment</label>\n                                        <select disabled id=\"payment\" onChange={this.Payment.bind(this)}>\n                                        </select>\n                                    </div>\n                                </div>\n                                <button id=\"Makecharge\" className=\"btn\" onClick={this.makeSession.bind(this)}>Make the charging</button>\n                            </form>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Charge;"]},"metadata":{},"sourceType":"module"}